<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>%%TITLE%%</title>
  <meta name="description" content="%%DESCRIPTION%%" />
  <link rel="canonical" href="%%CANONICAL%%" />
  <meta name="robots" content="index,follow" />
  <link rel="stylesheet" href="/assets/styles.css" />
  <link rel="stylesheet" href="/assets/guide.css" />
  %%HEAD_JSON_LD%%
</head>
<body data-city="%%DATA_CITY%%">
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="/" aria-label="Home">%%BRAND_NAME%%</a>

      <nav class="top-nav" aria-label="Primary">
        <a href="/guides/">Guides</a>
        %%OPTIONAL_TOP_NAV%%
        <a href="/faq/">FAQ</a>
        <a href="/methodology/">Methodology</a>
        <a href="/for-providers/">Advertising & Provider Info</a>
        <a href="/about/">About</a>
        <a href="/contact/">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container">
    %%MAIN_HTML%%
  </main>

  <div class="container">
    %%FOOTER%%
  </div>

  <script>
    // Footer year
    (function () {
      var y = new Date().getFullYear();
      var el = document.getElementById("year");
      if (el) el.textContent = String(y);
    })();

    // FAQ discoverability: add an "Expand all" / "Collapse all" control inside FAQ accordions.
    // Defaults open for discoverability; users can still collapse. (No content/schema changes.)
    (function () {
      function mountFaqTools(detailsEl) {
        if (!detailsEl) return;
        var panel = detailsEl.querySelector('.accordion-panel');
        if (!panel) return;
        if (panel.querySelector('[data-faq-tools="true"]')) return;

        var items = panel.querySelectorAll('details.faq-item');
        if (!items || items.length === 0) return;

        var wrap = document.createElement('div');
        wrap.setAttribute('data-faq-tools', 'true');
        wrap.style.display = 'flex';
        wrap.style.gap = '10px';
        wrap.style.flexWrap = 'wrap';
        wrap.style.margin = '0 0 12px 0';

        var expandBtn = document.createElement('button');
        expandBtn.type = 'button';
        expandBtn.className = 'button';
        expandBtn.textContent = 'Expand all';

        var collapseBtn = document.createElement('button');
        collapseBtn.type = 'button';
        collapseBtn.className = 'button';
        collapseBtn.textContent = 'Collapse all';

        expandBtn.addEventListener('click', function(){
          items.forEach(function(d){ d.open = true; });
        });
        collapseBtn.addEventListener('click', function(){
          items.forEach(function(d){ d.open = true; });
        });

        wrap.appendChild(expandBtn);
        wrap.appendChild(collapseBtn);
        panel.insertBefore(wrap, panel.firstChild);
      }

      function boot() {
        mountFaqTools(document.getElementById('city-faq'));
        mountFaqTools(document.getElementById('state-faq'));
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', boot);
      } else {
        boot();
      }
    })();
  
    // PI States hub: force a 5-column grid on /states/ so all 50 tiles land predictably.
    (function () {
      try {
        var p = (window.location && window.location.pathname) ? window.location.pathname : "";
        if (/^\/states\/?$/.test(p)) {
          var main = document.querySelector("main");
          if (!main) return;
          var grid = main.querySelector(".grid");
          if (grid) grid.classList.add("state-grid");
        }
      } catch (e) {}
    })();

</script>

  %%INLINE_SCRIPTS%%
</body>
</html>
